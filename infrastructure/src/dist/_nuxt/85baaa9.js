(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{595:function(t,e,n){"use strict";n(184)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},615:function(t,e,n){"use strict";n.d(e,"a",(function(){return U}));n(33),n(34),n(9),n(41),n(595);var r=n(13),o=n(16),c=n(18),l=n(19),d=n(7),f=n(317),h=n(12),m=n(70),v=n(45),y=(n(27),n(25),n(23),n(26),n(47),n(1)),O=n(36),w=n(8),j=n(20),k=n(31);k.a.register({anchor:{width:576,height:512,paths:[{d:"M13 352c-10.7 0-16-12.9-8.5-20.5l67-67c4.7-4.7 12.3-4.7 17 0l67 67c7.6 7.6 2.2 20.5-8.5 20.5h-35.1c20.3 54.3 85.2 86.6 144.1 94v-190h-52c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h52v-5.5c-37.3-13.2-64-48.7-64-90.5 0-53.5 43.7-96.7 97.4-96 52.2 0.7 94.6 43.8 94.6 96 0 41.8-26.7 77.3-64 90.5v5.5h52c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-52v190c59.2-7.4 123.8-39.7 144.1-94h-35.1c-10.7 0-16-12.9-8.5-20.5l67-67c4.7-4.7 12.3-4.7 17 0l67 67c7.6 7.6 2.2 20.5-8.5 20.5h-32.4c-21.8 102.6-136.4 160-242.6 160-106.1 0-220.8-57.3-242.6-160h-32.4zM288 64c-17.6 0-32 14.4-32 32s14.4 32 32 32 32-14.4 32-32-14.4-32-32-32z"}]}});n(391);function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var _=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(O.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},A=function(t){Object(c.a)(n,t);var e=D(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"onClick",value:function(){this.readonly||this.command()}},{key:"commandButtonClass",get:function(){return{"el-tiptap-editor__command-button":!0,"el-tiptap-editor__command-button--active":this.isActive,"el-tiptap-editor__command-button--readonly":this.readonly}}}]),n}(w.h);_([Object(w.f)({type:String,required:!0})],A.prototype,"icon",void 0),_([Object(w.f)({type:Boolean,default:!1})],A.prototype,"isActive",void 0),_([Object(w.f)({type:String,required:!0})],A.prototype,"tooltip",void 0),_([Object(w.f)({type:Boolean,required:!0})],A.prototype,"enableTooltip",void 0),_([Object(w.f)({type:Function,default:{}})],A.prototype,"command",void 0),_([Object(w.f)({type:Boolean,default:!1})],A.prototype,"readonly",void 0);var C,R=A=_([Object(w.a)({components:Object(y.a)({"v-icon":k.a},j.Tooltip.name,j.Tooltip)})],A),x=n(37),P=Object(x.a)(R,(function(){var t=this.$createElement,e=this._self._c||t;return e("el-tooltip",{attrs:{content:this.tooltip,"open-delay":350,disabled:!this.enableTooltip||this.readonly,transition:"el-zoom-in-bottom",effect:"dark",placement:"top"}},[e("div",{class:this.commandButtonClass,on:{mousedown:function(t){t.preventDefault()},click:this.onClick}},[e("v-icon",{attrs:{name:this.icon}})],1)])}),[],!1,null,null,null).exports;function B(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var E=function(t,e,n,desc){var r,o=arguments.length,c=o<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(O.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,desc);else for(var i=t.length-1;i>=0;i--)(r=t[i])&&(c=(o<3?r(c):o>3?r(e,n,c):r(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c},T=function(t){Object(c.a)(n,t);var e=S(n);function n(){var t;return Object(r.a)(this,n),(t=e.apply(this,arguments)).idAttrs={},t.addAnchorDialogVisible=!1,t.tooltip="Apply anchor",t}return Object(o.a)(n,[{key:"onDialogVisibleChange",value:function(){var t=this.editorContext.getMarkAttrs("anchor");this.idAttrs=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(Object(source),!0).forEach((function(e){Object(y.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):B(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t)}},{key:"mounted",value:function(){}},{key:"addAnchor",value:function(){this.editorContext.commands.anchor(this.idAttrs),this.closeAddAnchorDialog()}},{key:"openAddAnchorDialog",value:function(){this.addAnchorDialogVisible=!0}},{key:"closeAddAnchorDialog",value:function(){this.addAnchorDialogVisible=!1}}]),n}(w.h);E([Object(w.f)({type:Object,required:!0})],T.prototype,"editorContext",void 0),E([Object(w.c)()],T.prototype,"et",void 0),E([Object(w.i)("addAnchorDialogVisible",{immediate:!0})],T.prototype,"onDialogVisibleChange",null);var $=T=E([Object(w.a)({components:(C={},Object(y.a)(C,j.Dialog.name,j.Dialog),Object(y.a)(C,j.Form.name,j.Form),Object(y.a)(C,j.FormItem.name,j.FormItem),Object(y.a)(C,j.Input.name,j.Input),Object(y.a)(C,j.Checkbox.name,j.Checkbox),Object(y.a)(C,j.Button.name,j.Button),Object(y.a)(C,"CommandButton",P),C)})],T),z=Object(x.a)($,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("command-button",{attrs:{"is-active":t.editorContext.isActive.anchor(),readonly:t.et.isCodeViewMode,command:t.openAddAnchorDialog,"enable-tooltip":t.et.tooltip,tooltip:t.tooltip,icon:"anchor"}}),t._v(" "),n("el-dialog",{attrs:{title:t.tooltip,visible:t.addAnchorDialogVisible,"append-to-body":!0,width:"400px","custom-class":"el-tiptap-edit-link-dialog"},on:{"update:visible":function(e){t.addAnchorDialogVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{size:"small",round:""},on:{click:t.closeAddAnchorDialog}},[t._v("\n        Cancel\n      ")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",round:""},on:{mousedown:function(t){t.preventDefault()},click:t.addAnchor}},[t._v("\n        Add anchor\n      ")])]},proxy:!0}])},[n("el-form",{attrs:{model:t.idAttrs,"label-position":"right",size:"small"}},[n("el-form-item",{attrs:{label:"Add anchor",prop:"id"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.idAttrs.id,callback:function(e){t.$set(t.idAttrs,"id",e)},expression:"idAttrs.id"}})],1)],1)],1)],1)}),[],!1,null,null,null).exports;function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(d.a)(t);if(e){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}function V(t){return{id:t.getAttribute("id")}}function F(mark){var t=mark.attrs.id,e={};return e.id=t,["span",e,0]}var U=function(t){Object(c.a)(n,t);var e=M(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"commands",value:function(t){var e=t.type;return function(t){return t.id?Object(v.t)(e,t):Object(v.i)(e)}}},{key:"menuBtnView",value:function(t){return{component:z,componentProps:{editorContext:t}}}},{key:"name",get:function(){return"anchor"}},{key:"schema",get:function(){return{attrs:{id:{default:null}},inclusive:!1,parseDOM:[{tag:"span[id]",getAttrs:V}],toDOM:F}}},{key:"plugins",get:function(){return[new h.Plugin({props:{handleClick:function(view,t){var e=view.state,n=e.schema,r=e.doc,tr=e.tr,o=Object(m.b)(r.resolve(t),n.marks.anchor);if(!o)return!1;var c=r.resolve(o.from),l=r.resolve(o.to),d=tr.setSelection(new h.TextSelection(c,l));return view.dispatch(d),!0}}})]}}]),n}(f.s)},645:function(t,e,n){"use strict";n.r(e);n(27),n(25),n(23),n(9),n(26);var r=n(1),o=(n(87),n(44)),c=n(183),l=n(317),d=n(615);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function m(t){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("image",e),t.next=4,window.$nuxt.$store.dispatch("blogs/UPLOAD_IMAGE",n);case 4:return r=t.sent,t.abrupt("return",r.data.url);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var y={middleware:"auth",asyncData:function(t){return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.app,n=t.params,r=t.store,o=t.query,c=n.slug,e.next=4,r.dispatch("blogs/FETCH_BLOG_BY_SLUG",{slug:c});case 4:return l=e.sent,d="true"===o.dup&&!l.linked_id,e.abrupt("return",{blog:l,slug:c,isDuplicate:d});case 7:case"end":return e.stop()}}),e)})))()},fetch:function(){return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},components:{HeaderBlack:function(){return n.e(6).then(n.bind(null,668))},OffCanvasMobileMenu:function(){return n.e(1).then(n.bind(null,649))},SearchPopup:function(){return n.e(0).then(n.bind(null,650))},BlogSidebar:function(){return n.e(5).then(n.bind(null,665))},AdminSidebar:function(){return n.e(43).then(n.bind(null,670))},FooterTwo:function(){return n.e(2).then(n.bind(null,660))}},data:function(){return{id:this.$route.params.id,title:"",slug:"",editable:!1,output:"",extensions:[],content:"",isAdmin:!1,updateBody:null}},computed:h({},Object(c.b)({userId:"users/USER_ID",userRole:"users/USER_ROLE"})),watch:{blog:function(){},userRole:function(){this.setPermission()}},mounted:function(){this.extensions=[new l.g,new l.B,new l.v,new l.b({bubble:!0,menubar:!1}),new l.G({bubble:!0,menubar:!1}),new l.q({bubble:!0,menubar:!1}),new l.w({bubble:!0,menubar:!1}),new l.e,new l.j({bubble:!0,menubar:!1}),new l.i({bubble:!0,menubar:!1}),new l.D({bubble:!0,menubar:!1}),new l.E({bubble:!0,menubar:!1}),new l.k({level:5}),new l.t,new l.c,new l.u,new l.C({bubble:!0,menubar:!1}),new l.r({bubble:!0,menubar:!1}),new l.p,new l.a,new l.f,new l.s({bubble:!0,menubar:!1}),new l.o({uploadRequest:m}),new l.n,new l.x({resizable:!0}),new l.z,new l.y,new l.A,new l.m,new l.F,new d.a({bubble:!0,menubar:!1}),new l.l,new l.d],this.setPermission(),this.isAdmin||this.blog.user_id===this.userId||this.$router.push("/")},created:function(){this.slug=this.$route.params.slug,this.setBlog()},methods:{updateContent:function(t){for(var e in this.updateBody)t.hasOwnProperty(e)&&(this.updateBody[e]=t[e])},updateBlog:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var body,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.title&&""!==t.output){e.next=2;break}return e.abrupt("return",!1);case 2:return body=h(h({},t.updateBody),{},{source:t.output,title:t.title,dup:t.isDuplicate}),e.next=5,t.$store.dispatch("blogs/UPDATE_BLOG",body);case 5:n=e.sent,t.isDuplicate?t.$router.push("/blog/blog-list"):t.$router.push("/blog/".concat(n.slug));case 7:case"end":return e.stop()}}),e)})))()},deleteBlog:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.$bvModal.msgBoxConfirm("Please confirm that you want to delete everything.",{title:"Please Confirm",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,t.$store.dispatch("blogs/DELETE_BLOG",{slug:t.slug});case 3:e.sent.data.success&&t.$router.push("/blog/blog-list");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){}));case 1:case"end":return e.stop()}}),e)})))()},onUpdate:function(output,t){var e=t.getHTML;this.output=e()},setPermission:function(){this.userRole&&["super admin","admin"].indexOf(this.userRole)>-1&&(this.isAdmin=!0)},setBlog:function(){this.blog&&(this.content=this.blog.content,this.output=this.content,this.title=this.blog.caption,this.slug=this.blog.slug,this.updateBody=h({},this.blog))}},head:function(){return{title:"Update Blog"}}},O=n(37),component=Object(O.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container"},[n("HeaderBlack"),t._v(" "),n("OffCanvasMobileMenu"),t._v(" "),n("SearchPopup"),t._v(" "),n("div",{staticClass:"blog-creative-area pt--70 pb--100"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-8"},[n("div",{staticClass:"blog-details-wrapper"},[n("article",{staticClass:"blog-post standard-post"},[n("div",{staticClass:"col-lg-12 mb--10 p-0"},[n("h3",{staticClass:"heading heading-h3 font-32 mb-3"},[t._v("\n                  Title "),t.isDuplicate?n("b-badge",{attrs:{variant:"warning"}},[t._v("duplicate")]):t._e()],1),t._v(" "),n("b-form-input",{attrs:{size:"lg",placeholder:"Title"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),n("h3",{staticClass:"heading heading-h3 font-32 mt-5 mb-3"},[t._v("\n                Article Content "),t.isDuplicate?n("b-badge",{attrs:{variant:"warning"}},[t._v("duplicate")]):t._e()],1),t._v(" "),n("client-only",[n("el-tiptap",{attrs:{extensions:t.extensions,content:t.content,readonly:t.editable},on:{onUpdate:t.onUpdate}})],1)],1),t._v(" "),n("div",{staticClass:"post-nav-lisnt mb--45 wow move-up"},[n("div",{staticClass:"banner-btn mt--25"},[n("button",{staticClass:"brook-btn bk-btn-theme btn-sd-size btn-rounded space-between",on:{click:t.updateBlog}},[t._v("\n                  "+t._s(t.isDuplicate?"Duplicate":"Update")+"\n                ")]),t._v(" "),t.isAdmin?n("button",{staticClass:"brook-btn bk-btn-pink btn-sd-size btn-rounded space-between",on:{click:t.deleteBlog}},[t._v("\n                  Delete\n                ")]):t._e()])])])]),t._v(" "),n("div",{staticClass:"col-lg-4 mt_md--40 mt_sm--40"},[t.isAdmin?n("AdminSidebar",{attrs:{blog:t.blog},on:{update:t.updateContent}}):n("BlogSidebar")],1)])])]),t._v(" "),n("FooterTwo")],1)}),[],!1,null,null,null);e.default=component.exports}}]);